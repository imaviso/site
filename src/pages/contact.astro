---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";

const email = "contact@imaviso.com";
---

<Layout title="Contact - imaviso">
  <div class="w-[1000px] max-lg:w-full h-screen flex flex-col border-x border-[var(--color-border)] max-lg:border-x-0 relative overflow-hidden">
    <Nav currentPath="/contact" />

    <main id="main-content" class="flex-1 flex py-12 px-8 border-b border-[var(--color-border)] overflow-y-auto min-h-0 custom-scrollbar max-md:py-8 max-md:px-4">
      <div class="w-full">

        <!-- Terminal Prompt -->
        <div class="animate-fade-in mb-4">
          <div class="font-[var(--font-mono)] text-[0.8rem] text-[var(--color-muted)] flex items-center gap-1">
            <span class="text-[var(--color-accent)]">visitor</span>
            <span class="text-[var(--color-fg)]">@</span>
            <span class="text-[var(--color-accent)]">imaviso.com<span>
            <span class="text-[var(--color-muted)]">:</span>
            <span class="text-[var(--color-muted)]">~</span>
            <span class="text-[var(--color-fg)]">$</span>
            <span class="ml-1">cat contact.txt</span>
          </div>
        </div>

        <h1 class="font-[var(--font-mono)] text-[2.5rem] font-normal leading-[1.2] mb-2 text-[var(--color-fg)] tracking-[-0.02em] max-md:text-[1.75rem] max-[480px]:text-2xl animate-fade-in animation-delay-100">Contact</h1>

        <!-- Section Divider -->
        <div class="section-divider animate-fade-in animation-delay-200">
          <span>// get in touch</span>
        </div>

        <p class="text-[0.9rem] text-[var(--color-muted)] mb-8 leading-[1.6] max-w-[600px] font-[var(--font-mono)] max-md:text-[0.85rem] animate-fade-in animation-delay-200">
          I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision. Feel free to reach out through any of the channels below.
        </p>

        <div class="space-y-4 animate-fade-in animation-delay-300">
          <!-- Email with Copy -->
          <div class="bracket-card border border-[var(--color-border)] hover:border-[var(--color-fg)] transition-all duration-300 group bg-[var(--color-bg)]">
            <div class="flex items-center justify-between p-4">
              <a
                href={`mailto:${email}`}
                class="flex items-center gap-4 flex-1 group/link"
                aria-label="Send email"
              >
                <div class="text-[var(--color-muted)] group-hover:text-[var(--color-fg)] transition-all duration-200">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="16" x="2" y="4" rx="2"/>
                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                  </svg>
                </div>
                <div>
                  <div class="font-[var(--font-mono)] text-[var(--color-fg)] text-sm mb-1">Email</div>
                  <div class="font-[var(--font-mono)] text-[var(--color-muted)] text-[0.85rem] group-hover:text-[var(--color-fg)] transition-colors duration-200">{email}</div>
                </div>
              </a>
              <button
                id="copy-email-btn"
                type="button"
                class="p-2 text-[var(--color-muted)] hover:text-[var(--color-fg)] transition-all duration-200 hover:bg-[var(--color-border)] rounded"
                aria-label="Copy email to clipboard"
                data-email={email}
              >
                <svg id="copy-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                  <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                </svg>
                <svg id="check-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- LinkedIn -->
          <a
            href="https://linkedin.com/in/imaviso"
            target="_blank"
            rel="noopener noreferrer"
            class="bracket-card flex items-center gap-4 p-4 border border-[var(--color-border)] hover:border-[var(--color-fg)] transition-all duration-300 group bg-[var(--color-bg)]"
            aria-label="LinkedIn profile"
          >
            <div class="text-[var(--color-muted)] group-hover:text-[var(--color-fg)] transition-all duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                <rect width="4" height="12" x="2" y="9"/>
                <circle cx="4" cy="4" r="2"/>
              </svg>
            </div>
            <div class="flex-1">
              <div class="font-[var(--font-mono)] text-[var(--color-fg)] text-sm mb-1">LinkedIn</div>
              <div class="font-[var(--font-mono)] text-[var(--color-muted)] text-[0.85rem] group-hover:text-[var(--color-fg)] transition-colors duration-200">linkedin.com/in/imaviso</div>
            </div>
            <div class="text-[var(--color-muted)] group-hover:text-[var(--color-fg)] transition-all duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/>
                <path d="m12 5 7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- GitHub -->
          <a
            href="https://github.com/imaviso"
            target="_blank"
            rel="noopener noreferrer"
            class="bracket-card flex items-center gap-4 p-4 border border-[var(--color-border)] hover:border-[var(--color-fg)] transition-all duration-300 group bg-[var(--color-bg)]"
            aria-label="GitHub profile"
          >
            <div class="text-[var(--color-muted)] group-hover:text-[var(--color-fg)] transition-all duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
                <path d="M9 18c-4.51 2-5-2-7-2"/>
              </svg>
            </div>
            <div class="flex-1">
              <div class="font-[var(--font-mono)] text-[var(--color-fg)] text-sm mb-1">GitHub</div>
              <div class="font-[var(--font-mono)] text-[var(--color-muted)] text-[0.85rem] group-hover:text-[var(--color-fg)] transition-colors duration-200">github.com/imaviso</div>
            </div>
            <div class="text-[var(--color-muted)] group-hover:text-[var(--color-fg)] transition-all duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/>
                <path d="m12 5 7 7-7 7"/>
              </svg>
            </div>
          </a>
        </div>

      </div>
    </main>

    <Footer />
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <span class="flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="20 6 9 17 4 12"/>
      </svg>
      Copied to clipboard!
    </span>
  </div>
</Layout>

<script>
  function initCopyButton() {
    const copyBtn = document.getElementById('copy-email-btn');
    const copyIcon = document.getElementById('copy-icon');
    const checkIcon = document.getElementById('check-icon');
    const toast = document.getElementById('toast');

    copyBtn?.addEventListener('click', async (e) => {
      e.preventDefault();
      const email = copyBtn.getAttribute('data-email');

      if (email) {
        try {
          await navigator.clipboard.writeText(email);

          // Toggle icons
          copyIcon?.classList.add('hidden');
          checkIcon?.classList.remove('hidden');

          // Show toast
          toast?.classList.add('show');

          // Reset after 2 seconds
          setTimeout(() => {
            copyIcon?.classList.remove('hidden');
            checkIcon?.classList.add('hidden');
            toast?.classList.remove('show');
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
        }
      }
    });
  }

  // Run on initial load
  initCopyButton();

  // Re-run after view transitions
  document.addEventListener('astro:after-swap', initCopyButton);
</script>
