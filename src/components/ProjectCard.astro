---
import type { ImageMetadata } from "astro";

interface Props {
  title: string;
  description: string;
  href: string;
  image: ImageMetadata;
  imageAlt: string;
  tags: string[];
  index: number;
}

const { title, description, href, image, imageAlt, tags, index } = Astro.props;

// Format index as 01, 02, etc.
const formattedIndex = index.toString().padStart(2, '0');
---

<div class="bracket-card border border-[var(--color-border)] p-6 transition-all duration-300 hover:border-[var(--color-fg)] group bg-[var(--color-bg)]">
  <div class="flex flex-col md:flex-row gap-6">
    <!-- Image: 40% width on desktop, full on mobile -->
    <div class="w-full md:w-[40%] shrink-0">
      <div class="border border-[var(--color-border)] overflow-hidden">
        <img 
          src={image.src} 
          alt={imageAlt} 
          class="w-full h-auto"
          loading="lazy"
        />
      </div>
    </div>
    
    <!-- Content -->
    <div class="flex-1 flex flex-col justify-center">
      <!-- Title with number and arrow -->
      <h2 class="font-[var(--font-mono)] text-xl font-normal mb-3 text-[var(--color-fg)]">
        <a 
          href={href} 
          target="_blank" 
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 hover:opacity-80 transition-opacity duration-200"
        >
          <span class="text-[var(--color-muted)]">{formattedIndex}.</span>
          <span>{title}</span>
          <span class="arrow-animate inline-flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-50 group-hover:opacity-100 transition-opacity duration-200">
              <path d="M5 12h14"/>
              <path d="m12 5 7 7-7 7"/>
            </svg>
          </span>
        </a>
      </h2>
      
      <!-- Description -->
      <p class="text-[0.85rem] text-[var(--color-muted)] mb-4 leading-[1.7] font-[var(--font-mono)]">
        {description}
      </p>
      
      <!-- Tags -->
      <div class="flex gap-2 flex-wrap">
        {tags.map((tag) => (
          <span class="text-[0.7rem] text-[var(--color-muted)] font-[var(--font-mono)] px-2 py-1 border border-[var(--color-border)] transition-all duration-200 group-hover:border-[var(--color-muted)] group-hover:text-[var(--color-fg)]">
            {tag}
          </span>
        ))}
      </div>
    </div>
  </div>
</div>
